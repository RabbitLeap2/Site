<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>Visual Novel - Henry</title>
<style>
  body { 
    font-family: 'Arial', sans-serif; 
    background-color: #111; 
    color: #eee; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    height: 100vh; 
    margin: 0;
  }
  #game-container {
    width: 700px;
    background-color: #222;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 20px #000;
  }
  #dialogue {
    min-height: 150px;
    margin-bottom: 20px;
  }
  .choice {
    display: block;
    margin: 8px 0;
    padding: 10px;
    background-color: #444;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .choice:hover {
    background-color: #666;
  }
  #stats {
    margin-top: 10px;
    font-size: 0.9em;
    color: #ccc;
  }
</style>
</head>
<body>
<div id="game-container">
  <div id="dialogue"></div>
  <div id="choices"></div>
  <div id="stats"></div>
</div>

<script>
const stats = {
  amizade: 0,
  amor: 0,
  vinganca: 0,
  justicia: 0,
  esquecer: 0,
  magia: false
};

const script = [
  // Missão 1 - Artefato Roubado
  {
    text: "Henry: Tu sabes que estou à procura de como 'despertar' a minha magia, encontrei um cristal antigo e preciso da tua ajuda.",
    choices: [
      { text: "Podemos fazer isso depois.", effect: { amizade: 0 }, next: 1 },
      { text: "Podemos ir agora.", effect: {}, next: 2 },
      { text: "Vem falar comigo quando tens algo importante.", effect: { amizade: -10 }, next: 1 },
      { text: "Eu faria qualquer coisa por ti Henry.", effect: { amor: 5 }, next: 1 }
    ]
  },
  { text: "Você optou por adiar ou ganhar pontos de amor/amizade. Próxima missão.", choices:[{text:"Continuar", next:2}]},
  { text: "Vocês vão a uma caverna, lutam contra guardiões, mas a sala do artefato está vazia.", choices:[
      { text: "Investigar caminhos alternativos", next:3 },
      { text: "Desistir", next:4 }
    ]
  },
  { text: "Vocês encontram o antigo grupo de Henry.", choices:[
      { text: "Deixa-os ir", effect: { amizade: -5, esquecer: 5 }, next:5 },
      { text: "Prendê-los", effect: { amizade: 5, justicia:5 }, next:5 },
      { text: "Vingar-se", effect: { amizade: 10, vinganca:5 }, next:5 }
    ]
  },
  { text: "Fim da primeira fase.", choices:[{text:"Recomeçar", next:0}]},
  
  // Missão 2 - O Colecionador Ganancioso
  { text:"Henry descobriu o colecionador, ele pede 1500 moedas.", choices:[
    { text:"Dar o dinheiro", effect: { amizade:10, esquecer:5 }, next:6 },
    { text:"Solução alternativa", effect: { amizade:5, justicia:5, vinganca:5 }, next:7 },
    { text:"Henry resolve sozinho", effect: { amizade:-5, vinganca:5 }, next:7 },
    { text:"Dar tempo para pensar", effect: { amizade:5, justicia:5 }, next:7 },
    { text:"Contigo ao meu lado", effect: { amizade:5, amor:5, justicia:5 }, next:7 }
  ]},
  { text:"Missão concluída com dinheiro.", choices:[{text:"Continuar", next:7}]},
  { text:"Iniciando missão de infiltração na mansão do colecionador.", choices:[
    { text:"Roubar o mapa com Henry", effect: { amizade:5 }, next:8 }
  ]},

  { text:"Vocês usam areia para cegá-lo e fogem. Cena extra se amor >=10.", choices:[
    { text:"Começar relação com Henry", effect: { amor:5 }, next:9 },
    { text:"Não iniciar relação", effect: {}, next:9 }
  ]},

  // Missão 3 - Desejo Encontrado
  { text:"Henry encontra o cristal na caverna.", choices:[
    { text:"Usar magia para vingança", effect: { vinganca:5 }, cond: st => st.vinganca >=15 || st.amor>=5, next:10 },
    { text:"Usar magia com cautela", effect: { amistad:15, justicia:5 }, next:10 },
    { text:"Recusar magia", effect: { amizade:20, esquecer:5 }, cond: st => st.esquecer>=15 || st.amor>=5, next:10 },
    { text:"Destruir o cristal", effect: {}, next:11 }
  ]},
  { text:"Henry decide usar magia/recusar/deixar cristal...", choices:[{text:"Continuar", next:12}]},

  // Missão 4 - O Confronto Final
  { text:"Henry precisa enfrentar os pais.", choices:[
    { text:"Vamos agora", effect: {}, next:13 },
    { text:"Mais tarde", effect: {}, next:14 }
  ]},
  { text:"Confronto com pais, escolha do caminho baseado nos pontos:", choices:[
    { text:"Vingança A", effect: {}, cond: st => st.vinganca>=15, next:15 },
    { text:"Justiça B", effect: {}, cond: st => st.justica>=15, next:16 },
    { text:"Esquecer passado C", effect: {}, cond: st => st.esquecer>=15, next:17 },
    { text:"Mistura/amor BA", effect: {}, cond: st => st.amor>=5 && st.esquecer>=15, next:18 },
  ]},
  { text:"Fim da história com caminhos variados. Cena final e relação.", choices:[
    { text:"Passar noite com Henry", effect: {}, next:0 },
    { text:"Não passar noite", effect: {}, next:0 }
  ]}
];

const dialogueEl = document.getElementById("dialogue");
const choicesEl = document.getElementById("choices");
const statsEl = document.getElementById("stats");

function renderStats() {
  statsEl.textContent = `Amizade: ${stats.amizade}, Amor: ${stats.amor}, Vingança: ${stats.vinganca}, Justiça: ${stats.justicia}, Esquecer Passado: ${stats.esquecer}, Magia: ${stats.magia}`;
}

let current = 0;

function render() {
  const node = script[current];
  dialogueEl.textContent = node.text;
  choicesEl.innerHTML = "";

  node.choices.forEach((choice) => {
    if (choice.cond && !choice.cond(stats)) return; // condicional de escolha
    const btn = document.createElement("button");
    btn.className = "choice";
    btn.textContent = choice.text;
    btn.onclick = () => {
      if (choice.effect) {
        for (let key in choice.effect) {
          if (stats[key] !== undefined) stats[key] += choice.effect[key];
        }
      }
      current = choice.next;
      render();
      renderStats();
    };
    choicesEl.appendChild(btn);
  });
}

renderStats();
render();
</script>
</body>
</html>
s